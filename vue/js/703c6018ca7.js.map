{"version":3,"sources":["webpack://webpack-web/./node_modules/_konva@8.3.10@konva/lib/Animation.js","webpack://webpack-web/./node_modules/_konva@8.3.10@konva/lib/Canvas.js","webpack://webpack-web/./node_modules/_konva@8.3.10@konva/lib/Container.js","webpack://webpack-web/./node_modules/_konva@8.3.10@konva/lib/Context.js"],"names":[],"mappings":"kJAEI,EAAO,UAAY,CACnB,MAAI,mBAAoB,qBACb,UAAY,CACf,MAAO,sBAAqB,CAChC,EAEG,UAAY,CACf,MAAO,IAAI,MAAK,EAAE,QAAQ,CAC9B,CACJ,EAAG,EACI,MAAM,CAAU,CACnB,YAAY,EAAM,EAAQ,CACtB,KAAK,GAAK,EAAU,gBACpB,KAAK,MAAQ,CACT,KAAM,EACN,SAAU,EACV,SAAU,EAAI,EACd,UAAW,CACf,EACA,KAAK,KAAO,EACZ,KAAK,UAAU,CAAM,CACzB,CACA,UAAU,EAAQ,CACd,GAAI,GAAO,CAAC,EACZ,MAAK,GAGI,EAAO,OAAS,EACrB,EAAO,EAGP,EAAO,CAAC,CAAM,EANd,EAAO,CAAC,EAQZ,KAAK,OAAS,EACP,IACX,CACA,WAAY,CACR,MAAO,MAAK,MAChB,CACA,SAAS,EAAO,CACZ,GAAI,GAAS,KAAK,OAAQ,EAAM,EAAO,OAAQ,EAC/C,IAAK,EAAI,EAAG,EAAI,EAAK,IACjB,GAAI,EAAO,GAAG,MAAQ,EAAM,IACxB,MAAO,GAGf,YAAK,OAAO,KAAK,CAAK,EACf,EACX,CACA,WAAY,CACR,GAAI,GAAI,EAAW,EAAa,EAAE,WAAY,EAAM,EAAW,OAAQ,EACvE,IAAK,EAAI,EAAG,EAAI,EAAK,IACjB,GAAI,EAAW,GAAG,KAAO,KAAK,GAC1B,MAAO,GAGf,MAAO,EACX,CACA,OAAQ,CACJ,YAAK,KAAK,EACV,KAAK,MAAM,SAAW,EACtB,KAAK,MAAM,SAAW,EAAI,EAC1B,EAAU,cAAc,IAAI,EACrB,IACX,CACA,MAAO,CACH,SAAU,iBAAiB,IAAI,EACxB,IACX,CACA,mBAAmB,EAAM,CACrB,KAAK,MAAM,SAAW,EAAO,KAAK,MAAM,SACxC,KAAK,MAAM,SAAW,EACtB,KAAK,MAAM,MAAQ,KAAK,MAAM,SAC9B,KAAK,MAAM,UAAY,IAAO,KAAK,MAAM,QAC7C,CACA,MAAO,eAAc,EAAM,CACvB,KAAK,WAAW,KAAK,CAAI,EACzB,KAAK,iBAAiB,CAC1B,CACA,MAAO,kBAAiB,EAAM,CAC1B,GAAI,GAAK,EAAK,GAAI,EAAa,KAAK,WAAY,EAAM,EAAW,OAAQ,EACzE,IAAK,EAAI,EAAG,EAAI,EAAK,IACjB,GAAI,EAAW,GAAG,KAAO,EAAI,CACzB,KAAK,WAAW,OAAO,EAAG,CAAC,EAC3B,KACJ,CAER,CACA,MAAO,aAAa,CAChB,GAAI,GAAY,CAAC,EAAG,EAAa,KAAK,WAAY,EAAM,EAAQ,EAAM,EAAG,EAAG,EAAW,EAAO,EAAK,EACnG,IAAK,EAAI,EAAG,EAAI,EAAW,OAAQ,IAY/B,GAXA,EAAO,EAAW,GAClB,EAAS,EAAK,OACd,EAAO,EAAK,KACZ,EAAK,mBAAmB,EAAI,CAAC,EAC7B,EAAY,EAAO,OACf,EACA,EAAa,EAAK,KAAK,EAAM,EAAK,KAAK,IAAM,GAG7C,EAAa,GAEb,EAAC,EAGL,IAAK,EAAI,EAAG,EAAI,EAAW,IACvB,EAAQ,EAAO,GACX,EAAM,MAAQ,QACd,GAAU,EAAM,KAAO,GAInC,IAAK,IAAO,GACJ,CAAC,EAAU,eAAe,CAAG,GAGjC,EAAU,GAAK,UAAU,CAEjC,CACA,MAAO,iBAAiB,CACpB,GAAI,GAAO,EACP,EAAK,WAAW,OAChB,GAAK,WAAW,EAChB,qBAAsB,EAAK,cAAc,GAGzC,EAAK,YAAc,EAE3B,CACA,MAAO,mBAAmB,CACjB,KAAK,aACN,MAAK,YAAc,GACnB,qBAAsB,KAAK,cAAc,EAEjD,CACJ,CACA,EAAU,WAAa,CAAC,EACxB,EAAU,cAAgB,EAC1B,EAAU,YAAc,E,2GCvIpB,EACJ,YAA+B,CAC3B,GAAI,EACA,MAAO,GAEX,GAAI,GAAS,wBAAyB,EAClC,EAAU,EAAO,WAAW,IAAI,EACpC,SAAe,UAAY,CACvB,GAAI,GAAmB,+BAAkC,EAAG,EAAoB,EAAQ,8BACpF,EAAQ,2BACR,EAAQ,0BACR,EAAQ,yBACR,EAAQ,wBACR,EACJ,MAAO,GAAmB,CAC9B,EAAG,EACI,CACX,CACO,MAAM,CAAO,CAChB,YAAY,EAAQ,CAChB,KAAK,WAAa,EAClB,KAAK,MAAQ,EACb,KAAK,OAAS,EACd,KAAK,QAAU,GACf,GAAI,GAAO,GAAU,CAAC,EAClB,EAAa,EAAK,YAAc,iBAAoB,EAAoB,EAC5E,KAAK,WAAa,EAClB,KAAK,QAAU,wBAAyB,EACxC,KAAK,QAAQ,MAAM,QAAU,IAC7B,KAAK,QAAQ,MAAM,OAAS,IAC5B,KAAK,QAAQ,MAAM,OAAS,IAC5B,KAAK,QAAQ,MAAM,WAAa,cAChC,KAAK,QAAQ,MAAM,SAAW,WAC9B,KAAK,QAAQ,MAAM,IAAM,IACzB,KAAK,QAAQ,MAAM,KAAO,GAC9B,CACA,YAAa,CACT,MAAO,MAAK,OAChB,CACA,eAAgB,CACZ,MAAO,MAAK,UAChB,CACA,cAAc,EAAY,CACtB,GAAI,GAAgB,KAAK,WACzB,KAAK,WAAa,EAClB,KAAK,QAAQ,KAAK,SAAS,EAAI,EAAe,KAAK,UAAU,EAAI,CAAa,CAClF,CACA,SAAS,EAAO,CACZ,KAAK,MAAQ,KAAK,QAAQ,MAAQ,EAAQ,KAAK,WAC/C,KAAK,QAAQ,MAAM,MAAQ,EAAQ,KACnC,GAAI,GAAa,KAAK,WAAY,EAAW,KAAK,WAAW,EAAE,SAC/D,EAAS,MAAM,EAAY,CAAU,CACzC,CACA,UAAU,EAAQ,CACd,KAAK,OAAS,KAAK,QAAQ,OAAS,EAAS,KAAK,WAClD,KAAK,QAAQ,MAAM,OAAS,EAAS,KACrC,GAAI,GAAa,KAAK,WAAY,EAAW,KAAK,WAAW,EAAE,SAC/D,EAAS,MAAM,EAAY,CAAU,CACzC,CACA,UAAW,CACP,MAAO,MAAK,KAChB,CACA,WAAY,CACR,MAAO,MAAK,MAChB,CACA,QAAQ,EAAO,EAAQ,CACnB,KAAK,SAAS,GAAS,CAAC,EACxB,KAAK,UAAU,GAAU,CAAC,CAC9B,CACA,UAAU,EAAU,EAAS,CACzB,GAAI,CACA,MAAO,MAAK,QAAQ,UAAU,EAAU,CAAO,CACnD,OACO,EAAP,CACI,GAAI,CACA,MAAO,MAAK,QAAQ,UAAU,CAClC,OACO,EAAP,CACI,iBAAW,2BACP,EAAI,QACJ,yEAAyE,EACtE,EACX,CACJ,CACJ,CACJ,CACA,oBAAwB,EAAQ,aAAc,OAAW,SAAmB,CAAC,EACtE,MAAM,SAAoB,EAAO,CACpC,YAAY,EAAS,CAAE,MAAO,EAAG,OAAQ,CAAE,EAAG,CAC1C,MAAM,CAAM,EACZ,KAAK,QAAU,GAAI,MAAa,IAAI,EACpC,KAAK,QAAQ,EAAO,MAAO,EAAO,MAAM,CAC5C,CACJ,CACO,MAAM,SAAkB,EAAO,CAClC,YAAY,EAAS,CAAE,MAAO,EAAG,OAAQ,CAAE,EAAG,CAC1C,MAAM,CAAM,EACZ,KAAK,UAAY,GACjB,KAAK,QAAU,GAAI,MAAW,IAAI,EAClC,KAAK,QAAQ,EAAO,MAAO,EAAO,MAAM,CAC5C,CACJ,C,mECvGO,MAAM,SAAkB,IAAK,CAChC,aAAc,CACV,MAAM,GAAG,SAAS,EAClB,KAAK,SAAW,CAAC,CACrB,CACA,YAAY,EAAY,CACpB,GAAI,CAAC,EACD,MAAO,MAAK,UAAY,CAAC,EAE7B,KAAM,GAAW,KAAK,UAAY,CAAC,EACnC,GAAI,GAAU,CAAC,EACf,SAAS,QAAQ,SAAU,EAAO,CAC1B,EAAW,CAAK,GAChB,EAAQ,KAAK,CAAK,CAE1B,CAAC,EACM,CACX,CACA,aAAc,CACV,MAAO,MAAK,YAAY,EAAE,OAAS,CACvC,CACA,gBAAiB,CACb,YAAK,YAAY,EAAE,QAAS,GAAU,CAClC,EAAM,OAAS,KACf,EAAM,MAAQ,EACd,EAAM,OAAO,CACjB,CAAC,EACD,KAAK,SAAW,CAAC,EACjB,KAAK,aAAa,EACX,IACX,CACA,iBAAkB,CACd,YAAK,YAAY,EAAE,QAAS,GAAU,CAClC,EAAM,OAAS,KACf,EAAM,MAAQ,EACd,EAAM,QAAQ,CAClB,CAAC,EACD,KAAK,SAAW,CAAC,EACjB,KAAK,aAAa,EACX,IACX,CACA,OAAO,EAAU,CACb,GAAI,UAAU,OAAS,EAAG,CACtB,OAAS,GAAI,EAAG,EAAI,UAAU,OAAQ,IAClC,KAAK,IAAI,UAAU,EAAE,EAEzB,MAAO,KACX,CACA,GAAI,GAAQ,EAAS,GACrB,MAAI,GAAM,UAAU,EAChB,GAAM,OAAO,IAAI,EACV,MAEX,MAAK,aAAa,CAAK,EACvB,EAAM,MAAQ,KAAK,YAAY,EAAE,OACjC,EAAM,OAAS,KACf,EAAM,aAAa,EACnB,KAAK,YAAY,EAAE,KAAK,CAAK,EAC7B,KAAK,MAAM,MAAO,CACd,MAAO,CACX,CAAC,EACD,KAAK,aAAa,EACX,KACX,CACA,SAAU,CACN,MAAI,MAAK,YAAY,GACjB,KAAK,gBAAgB,EAEzB,MAAM,QAAQ,EACP,IACX,CACA,KAAK,EAAU,CACX,MAAO,MAAK,aAAa,EAAU,EAAK,CAC5C,CACA,QAAQ,EAAU,CACd,GAAI,GAAS,KAAK,aAAa,EAAU,EAAI,EAC7C,MAAO,GAAO,OAAS,EAAI,EAAO,GAAK,MAC3C,CACA,aAAa,EAAU,EAAS,CAC5B,GAAI,GAAS,CAAC,EACd,YAAK,aAAc,GAAS,CACxB,KAAM,GAAQ,EAAK,SAAS,CAAQ,EAIpC,MAHI,IACA,EAAO,KAAK,CAAI,EAEhB,MAAS,EAIjB,CAAC,EACM,CACX,CACA,aAAa,EAAI,CACb,GAAI,GAAa,GACjB,KAAM,GAAW,KAAK,YAAY,EAClC,SAAW,KAAS,GAAU,CAE1B,GADA,EAAa,EAAG,CAAK,EACjB,EACA,MAAO,GAEX,GAAI,EAAC,EAAM,YAAY,GAGvB,GAAa,EAAM,aAAa,CAAE,EAC9B,GACA,MAAO,EAEf,CACA,MAAO,EACX,CACA,UAAW,CACP,GAAI,GAAM,4BAA6B,IAAI,EAC3C,SAAI,SAAW,CAAC,EAChB,KAAK,YAAY,EAAE,QAAS,GAAU,CAClC,EAAI,SAAS,KAAK,EAAM,SAAS,CAAC,CACtC,CAAC,EACM,CACX,CACA,aAAa,EAAM,CAEf,OADI,GAAS,EAAK,UAAU,EACrB,GAAQ,CACX,GAAI,EAAO,MAAQ,KAAK,IACpB,MAAO,GAEX,EAAS,EAAO,UAAU,CAC9B,CACA,MAAO,EACX,CACA,MAAM,EAAK,CACP,GAAI,GAAO,yBAA0B,KAAM,CAAG,EAC9C,YAAK,YAAY,EAAE,QAAQ,SAAU,EAAI,CACrC,EAAK,IAAI,EAAG,MAAM,CAAC,CACvB,CAAC,EACM,CACX,CACA,oBAAoB,EAAK,CACrB,GAAI,GAAM,CAAC,EACX,YAAK,KAAK,OAAO,EAAE,QAAQ,SAAU,EAAO,CACpC,EAAM,UAAU,GAAK,EAAM,WAAW,CAAG,GACzC,EAAI,KAAK,CAAK,CAEtB,CAAC,EACM,CACX,CACA,6BAA6B,EAAM,CAC/B,GAAI,GAEJ,MADM,6BAA6B,CAAI,EACnC,MAAK,SAAS,GAGjB,IAAK,KAAK,YAAc,MAAQ,IAAO,QAAkB,EAAG,QAAQ,SAAU,EAAM,CACjF,EAAK,6BAA6B,CAAI,CAC1C,CAAC,EACL,CACA,qBAAsB,CAClB,GAAI,GACH,GAAK,KAAK,YAAc,MAAQ,IAAO,QAAkB,EAAG,QAAQ,SAAU,EAAO,EAAG,CACrF,EAAM,MAAQ,CAClB,CAAC,EACD,KAAK,aAAa,CACtB,CACA,UAAU,EAAK,EAAK,CAChB,GAAI,GAAQ,KAAK,SAAS,EAAG,EAAS,GAAQ,GAAS,EAAM,UAAU,EAAI,EAAU,GAAU,EAAO,WAAW,EAAG,EAAe,KAAK,gBAAgB,EAAG,EAAoB,GAAgB,EAAa,MACxM,EAAU,GAAU,EAAO,QAC/B,GAAI,CAAC,KAAK,UAAU,GAAK,CAAC,EACtB,MAAO,MAEX,GAAI,EAAmB,CACnB,EAAQ,KAAK,EACb,GAAI,GAAI,KAAK,qBAAqB,CAAG,EAAE,UAAU,EACjD,EAAQ,UAAU,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,EAAE,EACpD,KAAK,uBAAuB,CAAO,EACnC,EAAQ,QAAQ,CACpB,KAEI,MAAK,cAAc,YAAa,EAAQ,CAAG,EAE/C,MAAO,KACX,CACA,QAAQ,EAAK,EAAK,CACd,GAAI,CAAC,KAAK,cAAc,CAAG,EACvB,MAAO,MAEX,GAAI,GAAQ,KAAK,SAAS,EAAG,EAAS,GAAQ,GAAS,EAAM,UAAY,EAAU,GAAU,EAAO,WAAW,EAAG,EAAe,KAAK,gBAAgB,EAAG,EAAkB,GAAgB,EAAa,IACxM,GAAI,EAAiB,CACjB,EAAQ,KAAK,EACb,GAAI,GAAI,KAAK,qBAAqB,CAAG,EAAE,UAAU,EACjD,EAAQ,UAAU,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,EAAE,EACpD,KAAK,qBAAqB,CAAO,EACjC,EAAQ,QAAQ,CACpB,KAEI,MAAK,cAAc,UAAW,EAAQ,CAAG,EAE7C,MAAO,KACX,CACA,cAAc,EAAY,EAAQ,EAAK,CACnC,GAAI,GACA,EAAU,GAAU,EAAO,WAAW,EAAG,EAAY,KAAK,UAAU,EAAG,EAAa,KAAK,WAAW,EAAG,EAAW,KAAK,SAAS,EAAG,EAAW,GAAa,GAAe,EAC9K,KAAM,GAAY,IAAQ,KAC1B,GAAI,EAAS,CACT,EAAQ,KAAK,EACb,GAAI,GAAY,KAAK,qBAAqB,CAAG,EACzC,EAAI,EAAU,UAAU,EAG5B,GAFA,EAAQ,UAAU,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,EAAE,EACpD,EAAQ,UAAU,EACd,EACA,EAAS,KAAK,KAAM,EAAS,IAAI,MAEhC,CACD,GAAI,GAAQ,KAAK,MAAM,EACnB,EAAQ,KAAK,MAAM,EACvB,EAAQ,KAAK,EAAO,EAAO,EAAW,CAAU,CACpD,CACA,EAAQ,KAAK,EACb,EAAI,EAAU,KAAK,EAAE,OAAO,EAAE,UAAU,EACxC,EAAQ,UAAU,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,GAAI,EAAE,EAAE,CACxD,CACA,GAAI,GAAiB,CAAC,GAClB,KAAK,yBAAyB,IAAM,eACpC,IAAe,YACf,GACA,GAAQ,KAAK,EACb,EAAQ,+BAA+B,IAAI,GAE9C,GAAK,KAAK,YAAc,MAAQ,IAAO,QAAkB,EAAG,QAAQ,SAAU,EAAO,CAClF,EAAM,GAAY,EAAQ,CAAG,CACjC,CAAC,EACG,GACA,EAAQ,QAAQ,EAEhB,GACA,EAAQ,QAAQ,CAExB,CACA,cAAc,EAAQ,CAClB,GAAI,GACJ,EAAS,GAAU,CAAC,EACpB,GAAI,GAAgB,EAAO,cACvB,EAAa,EAAO,WACpB,EAAM,EAAM,EAAM,EAClB,EAAW,CACX,EAAG,IACH,EAAG,IACH,MAAO,EACP,OAAQ,CACZ,EACI,EAAO,KACV,GAAK,KAAK,YAAc,MAAQ,IAAO,QAAkB,EAAG,QAAQ,SAAU,EAAO,CAClF,GAAI,EAAC,EAAM,QAAQ,EAGnB,IAAI,GAAO,EAAM,cAAc,CAC3B,WAAY,EACZ,WAAY,EAAO,WACnB,WAAY,EAAO,UACvB,CAAC,EACG,EAAK,QAAU,GAAK,EAAK,SAAW,GAGxC,CAAI,IAAS,OACT,GAAO,EAAK,EACZ,EAAO,EAAK,EACZ,EAAO,EAAK,EAAI,EAAK,MACrB,EAAO,EAAK,EAAI,EAAK,QAGrB,GAAO,KAAK,IAAI,EAAM,EAAK,CAAC,EAC5B,EAAO,KAAK,IAAI,EAAM,EAAK,CAAC,EAC5B,EAAO,KAAK,IAAI,EAAM,EAAK,EAAI,EAAK,KAAK,EACzC,EAAO,KAAK,IAAI,EAAM,EAAK,EAAI,EAAK,MAAM,IAElD,CAAC,EAGD,OAFI,GAAS,KAAK,KAAK,OAAO,EAC1B,EAAa,GACR,EAAI,EAAG,EAAI,EAAO,OAAQ,IAAK,CACpC,GAAI,GAAQ,EAAO,GACnB,GAAI,EAAM,WAAW,IAAI,EAAG,CACxB,EAAa,GACb,KACJ,CACJ,CAiBA,MAhBI,IAAc,IAAS,OACvB,EAAW,CACP,EAAG,EACH,EAAG,EACH,MAAO,EAAO,EACd,OAAQ,EAAO,CACnB,EAGA,EAAW,CACP,EAAG,EACH,EAAG,EACH,MAAO,EACP,OAAQ,CACZ,EAEC,EAGE,EAFI,KAAK,iBAAiB,EAAU,CAAU,CAGzD,CACJ,CACA,8BAAkC,EAAW,OAAQ,CACjD,IACA,IACA,QACA,QACJ,CAAC,EACD,oBAAwB,EAAW,QAAS,OAAW,SAAmB,CAAC,EAC3E,oBAAwB,EAAW,QAAS,OAAW,SAAmB,CAAC,EAC3E,oBAAwB,EAAW,YAAa,OAAW,SAAmB,CAAC,EAC/E,oBAAwB,EAAW,aAAc,OAAW,SAAmB,CAAC,EAChF,oBAAwB,EAAW,UAAU,C,6EC3T7C,WAAuB,EAAK,CACxB,GAAI,GAAS,CAAC,EAAG,EAAM,EAAI,OAAQ,EAAO,IAAM,EAAG,EACnD,IAAK,EAAI,EAAG,EAAI,EAAK,IACjB,EAAM,EAAI,GACN,EAAK,UAAU,CAAG,EAClB,EAAM,KAAK,MAAM,EAAM,GAAI,EAAI,IAEzB,EAAK,UAAU,CAAG,GACxB,GAAM,EAAM,IAEhB,EAAO,KAAK,CAAG,EAEnB,MAAO,EACX,CACA,GAAI,GAAQ,IAAK,EAAa,IAAK,EAAc,IAAK,EAAqB,KAAM,EAAsB,KAAM,EAAY,IAAK,EAAe,KAAM,EAAS,IAAK,EAAkB,CAC/K,MACA,QACA,YACA,gBACA,YACA,OACA,YACA,uBACA,gBACA,uBACA,YACA,UACA,OACA,WACA,eACA,kBACA,SACA,SACA,eACA,mBACA,OACA,UACA,SACA,OACA,QACA,cACA,eACA,SACA,aACA,YACA,WACJ,EACI,EAAqB,CACrB,YACA,cACA,cACA,aACA,gBACA,gBACA,UACA,iBACA,WACA,YACA,aACA,OACA,YACA,eACA,cACA,2BACA,uBACJ,EACA,KAAM,GAAc,IACb,MAAM,CAAQ,CACjB,YAAY,EAAQ,CAChB,KAAK,OAAS,EACd,KAAK,SAAW,EAAO,QAAQ,WAAW,IAAI,EAC1C,kBACA,MAAK,SAAW,CAAC,EACjB,KAAK,aAAa,EAE1B,CACA,UAAU,EAAO,CACT,EAAM,YAAY,GAClB,KAAK,MAAM,CAAK,CAExB,CACA,MAAM,EAAO,CACb,CACA,YAAY,EAAO,CACX,EAAM,UAAU,GAChB,KAAK,QAAQ,CAAK,CAE1B,CACA,QAAQ,EAAO,CACf,CACA,gBAAgB,EAAO,CACf,EAAM,MAAM,uBACZ,MAAK,YAAY,CAAK,EACtB,KAAK,UAAU,CAAK,GAGpB,MAAK,UAAU,CAAK,EACpB,KAAK,YAAY,CAAK,EAE9B,CACA,SAAS,EAAS,EAAS,CACvB,GAAI,GAAW,KAAK,SAAU,EAAM,EAAS,OAAQ,EAAM,GAAI,EAAG,EAAO,EAAQ,EACjF,IAAK,EAAI,EAAG,EAAI,EAAK,IACjB,EAAQ,EAAS,GACjB,EAAS,EAAM,OACX,EACA,GAAO,EAAM,KACb,GAAO,EACH,EACA,GAAO,EAGH,aAAc,EAAK,EAAE,EACrB,GAAO,EAAqB,EAAK,KAAK,CAAK,EAAI,EAG3C,IACA,GAAO,EAAK,IAAK,GAAM,MAAO,IAAM,SAAW,KAAK,MAAM,CAAC,EAAI,CAAC,GAEpE,GAAO,EAAa,EAAK,KAAK,CAAK,EAAI,IAK/C,IAAO,EAAM,SACR,GACD,IAAO,EAAS,EAAM,MAG9B,GAAO,EAEX,MAAO,EACX,CACA,YAAa,CACT,KAAK,SAAW,CAAC,CACrB,CACA,OAAO,EAAK,CACR,GAAI,GAAW,KAAK,SAAU,EAC9B,EAAS,KAAK,CAAG,EACjB,EAAM,EAAS,OACX,GAAO,GACP,EAAS,MAAM,CAEvB,CACA,OAAQ,CACJ,GAAI,GAAa,KAAK,UAAU,EAAE,cAAc,EAChD,KAAK,aAAa,EAAI,EAAY,EAAG,EAAG,EAAI,EAAY,EAAG,CAAC,CAChE,CACA,WAAY,CACR,MAAO,MAAK,MAChB,CACA,MAAM,EAAQ,CACV,GAAI,GAAS,KAAK,UAAU,EACxB,EACA,KAAK,UAAU,EAAO,GAAK,EAAG,EAAO,GAAK,EAAG,EAAO,OAAS,EAAG,EAAO,QAAU,CAAC,EAGlF,KAAK,UAAU,EAAG,EAAG,EAAO,SAAS,EAAI,EAAO,WAAY,EAAO,UAAU,EAAI,EAAO,UAAU,CAE1G,CACA,cAAc,EAAO,CACjB,GAAI,GAAU,EAAM,WAAW,EAC3B,GACA,KAAK,QAAQ,UAAW,CAAO,CAEvC,CACA,cAAc,EAAO,CACjB,GAAI,GAAa,EAAM,mBAAmB,EACtC,IAAe,GACf,KAAK,QAAQ,cAAe,CAAU,CAE9C,CACA,eAAe,EAAO,CAClB,GAAI,GAAW,EAAM,MAAM,SACvB,GACA,KAAK,QAAQ,WAAY,CAAQ,CAEzC,CACA,QAAQ,EAAM,EAAK,CACf,KAAK,SAAS,GAAQ,CAC1B,CACA,IAAI,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,CACxB,KAAK,SAAS,IAAI,EAAI,EAAI,EAAI,EAAI,EAAI,CAAE,CAC5C,CACA,MAAM,EAAI,EAAI,EAAI,EAAI,EAAI,CACtB,KAAK,SAAS,MAAM,EAAI,EAAI,EAAI,EAAI,CAAE,CAC1C,CACA,WAAY,CACR,KAAK,SAAS,UAAU,CAC5B,CACA,cAAc,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,CAClC,KAAK,SAAS,cAAc,EAAI,EAAI,EAAI,EAAI,EAAI,CAAE,CACtD,CACA,UAAU,EAAI,EAAI,EAAI,EAAI,CACtB,KAAK,SAAS,UAAU,EAAI,EAAI,EAAI,CAAE,CAC1C,CACA,MAAO,CACH,KAAK,SAAS,KAAK,CACvB,CACA,WAAY,CACR,KAAK,SAAS,UAAU,CAC5B,CACA,gBAAgB,EAAI,EAAI,CACpB,GAAI,GAAI,UACR,GAAI,EAAE,SAAW,EACb,MAAO,MAAK,SAAS,gBAAgB,EAAI,CAAE,EAE1C,GAAI,EAAE,SAAW,EAClB,MAAO,MAAK,SAAS,gBAAgB,CAAE,CAE/C,CACA,qBAAqB,EAAI,EAAI,EAAI,EAAI,CACjC,MAAO,MAAK,SAAS,qBAAqB,EAAI,EAAI,EAAI,CAAE,CAC5D,CACA,cAAc,EAAI,EAAI,CAClB,MAAO,MAAK,SAAS,cAAc,EAAI,CAAE,CAC7C,CACA,qBAAqB,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,CACzC,MAAO,MAAK,SAAS,qBAAqB,EAAI,EAAI,EAAI,EAAI,EAAI,CAAE,CACpE,CACA,UAAU,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,CAC1C,GAAI,GAAI,UAAW,EAAW,KAAK,SAC/B,EAAE,SAAW,EACb,EAAS,UAAU,EAAI,EAAI,CAAE,EAExB,EAAE,SAAW,EAClB,EAAS,UAAU,EAAI,EAAI,EAAI,EAAI,CAAE,EAEhC,EAAE,SAAW,GAClB,EAAS,UAAU,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,CAAE,CAE7D,CACA,QAAQ,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,CACpC,KAAK,SAAS,QAAQ,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,CAAE,CACxD,CACA,cAAc,EAAG,EAAG,CAChB,MAAO,MAAK,SAAS,cAAc,EAAG,CAAC,CAC3C,CACA,KAAK,EAAQ,CACL,EACA,KAAK,SAAS,KAAK,CAAM,EAGzB,KAAK,SAAS,KAAK,CAE3B,CACA,SAAS,EAAG,EAAG,EAAO,EAAQ,CAC1B,KAAK,SAAS,SAAS,EAAG,EAAG,EAAO,CAAM,CAC9C,CACA,WAAW,EAAG,EAAG,EAAO,EAAQ,CAC5B,KAAK,SAAS,WAAW,EAAG,EAAG,EAAO,CAAM,CAChD,CACA,SAAS,EAAM,EAAG,EAAG,EAAU,CACvB,EACA,KAAK,SAAS,SAAS,EAAM,EAAG,EAAG,CAAQ,EAG3C,KAAK,SAAS,SAAS,EAAM,EAAG,CAAC,CAEzC,CACA,YAAY,EAAM,CACd,MAAO,MAAK,SAAS,YAAY,CAAI,CACzC,CACA,aAAa,EAAI,EAAI,EAAI,EAAI,CACzB,MAAO,MAAK,SAAS,aAAa,EAAI,EAAI,EAAI,CAAE,CACpD,CACA,OAAO,EAAI,EAAI,CACX,KAAK,SAAS,OAAO,EAAI,CAAE,CAC/B,CACA,OAAO,EAAI,EAAI,CACX,KAAK,SAAS,OAAO,EAAI,CAAE,CAC/B,CACA,KAAK,EAAI,EAAI,EAAI,EAAI,CACjB,KAAK,SAAS,KAAK,EAAI,EAAI,EAAI,CAAE,CACrC,CACA,aAAa,EAAI,EAAI,EAAI,CACrB,KAAK,SAAS,aAAa,EAAI,EAAI,CAAE,CACzC,CACA,iBAAiB,EAAI,EAAI,EAAI,EAAI,CAC7B,KAAK,SAAS,iBAAiB,EAAI,EAAI,EAAI,CAAE,CACjD,CACA,SAAU,CACN,KAAK,SAAS,QAAQ,CAC1B,CACA,OAAO,EAAI,CACP,KAAK,SAAS,OAAO,CAAE,CAC3B,CACA,MAAO,CACH,KAAK,SAAS,KAAK,CACvB,CACA,MAAM,EAAI,EAAI,CACV,KAAK,SAAS,MAAM,EAAI,CAAE,CAC9B,CACA,YAAY,EAAI,CACR,KAAK,SAAS,YACd,KAAK,SAAS,YAAY,CAAE,EAEvB,WAAa,MAAK,SACvB,KAAK,SAAS,QAAa,EAEtB,kBAAoB,MAAK,UAC9B,MAAK,SAAS,eAAoB,EAE1C,CACA,aAAc,CACV,MAAO,MAAK,SAAS,YAAY,CACrC,CACA,aAAa,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,CACjC,KAAK,SAAS,aAAa,EAAI,EAAI,EAAI,EAAI,EAAI,CAAE,CACrD,CACA,OAAO,EAAQ,CACP,EACA,KAAK,SAAS,OAAO,CAAM,EAG3B,KAAK,SAAS,OAAO,CAE7B,CACA,WAAW,EAAI,EAAI,EAAI,EAAI,CACvB,KAAK,SAAS,WAAW,EAAI,EAAI,EAAI,CAAE,CAC3C,CACA,UAAU,EAAI,EAAI,EAAI,EAAI,EAAI,EAAI,CAC9B,KAAK,SAAS,UAAU,EAAI,EAAI,EAAI,EAAI,EAAI,CAAE,CAClD,CACA,UAAU,EAAI,EAAI,CACd,KAAK,SAAS,UAAU,EAAI,CAAE,CAClC,CACA,cAAe,CACX,GAAI,GAAO,KAAM,EAAM,EAAgB,OAAQ,EAAa,KAAK,QAAS,EAAG,EACzE,EAAO,SAAU,EAAY,CAC7B,GAAI,GAAa,EAAK,GAAa,EACnC,EAAK,GAAc,UAAY,CAC3B,SAAO,EAAc,MAAM,UAAU,MAAM,KAAK,UAAW,CAAC,CAAC,EAC7D,EAAM,EAAW,MAAM,EAAM,SAAS,EACtC,EAAK,OAAO,CACR,OAAQ,EACR,KAAM,CACV,CAAC,EACM,CACX,CACJ,EACA,IAAK,EAAI,EAAG,EAAI,EAAK,IACjB,EAAK,EAAgB,EAAE,EAE3B,EAAK,QAAU,UAAY,CACvB,EAAW,MAAM,EAAM,SAAS,EAChC,GAAI,GAAO,UAAU,GACjB,EAAM,UAAU,GAChB,KAAS,iBACT,IAAS,iBACT,IAAS,eACT,GAAM,EAAM,KAAK,OAAO,cAAc,GAE1C,EAAK,OAAO,CACR,SAAU,EACV,IAAK,CACT,CAAC,CACL,CACJ,CACA,+BAA+B,EAAM,CACjC,KAAM,GAAK,EAAK,MAAM,yBACtB,GAAI,GAAM,CAAC,GAAM,IAAO,cACnB,GACD,KAAK,QAAQ,2BAA4B,CAAE,CAEnD,CACJ,CACA,EAAmB,QAAQ,SAAU,EAAM,CACvC,OAAO,eAAe,EAAQ,UAAW,EAAM,CAC3C,KAAM,CACF,MAAO,MAAK,SAAS,EACzB,EACA,IAAI,EAAK,CACL,KAAK,SAAS,GAAQ,CAC1B,CACJ,CAAC,CACL,CAAC,EACM,MAAM,SAAqB,EAAQ,CACtC,WAAW,EAAO,CACd,GAAI,GAAO,EAAM,KAAK,EACtB,KAAK,QAAQ,YAAa,CAAI,EAC9B,EAAM,UAAU,IAAI,CACxB,CACA,aAAa,EAAO,CAChB,KAAK,QAAQ,YAAa,EAAM,gBAAgB,CAAC,EACjD,EAAM,UAAU,IAAI,CACxB,CACA,oBAAoB,EAAO,CACvB,GAAI,GAAM,EAAM,mBAAmB,EAC/B,GACA,MAAK,QAAQ,YAAa,CAAG,EAC7B,EAAM,UAAU,IAAI,EAE5B,CACA,oBAAoB,EAAO,CACvB,GAAI,GAAM,EAAM,mBAAmB,EAC/B,GACA,MAAK,QAAQ,YAAa,CAAG,EAC7B,EAAM,UAAU,IAAI,EAE5B,CACA,MAAM,EAAO,CACT,GAAI,GAAW,EAAM,KAAK,EAAG,EAAe,EAAM,gBAAgB,EAClE,GAAI,GAAY,IAAiB,QAAS,CACtC,KAAK,WAAW,CAAK,EACrB,MACJ,CACA,GAAI,GAAa,EAAM,oBAAoB,EAC3C,GAAI,GAAc,IAAiB,UAAW,CAC1C,KAAK,aAAa,CAAK,EACvB,MACJ,CACA,GAAI,GAAoB,EAAM,gCAAgC,EAC9D,GAAI,GAAqB,IAAiB,kBAAmB,CACzD,KAAK,oBAAoB,CAAK,EAC9B,MACJ,CACA,GAAI,GAAoB,EAAM,gCAAgC,EAC9D,GAAI,GAAqB,IAAiB,kBAAmB,CACzD,KAAK,oBAAoB,CAAK,EAC9B,MACJ,CACI,EACA,KAAK,WAAW,CAAK,EAEhB,EACL,KAAK,aAAa,CAAK,EAElB,EACL,KAAK,oBAAoB,CAAK,EAEzB,GACL,KAAK,oBAAoB,CAAK,CAEtC,CACA,sBAAsB,EAAO,CACzB,GAAI,GAAQ,EAAM,kCAAkC,EAAG,EAAM,EAAM,gCAAgC,EAAG,EAAa,EAAM,kCAAkC,EAAG,EAAM,KAAK,qBAAqB,EAAM,EAAG,EAAM,EAAG,EAAI,EAAG,EAAI,CAAC,EAC5N,GAAI,EAAY,CACZ,OAAS,GAAI,EAAG,EAAI,EAAW,OAAQ,GAAK,EACxC,EAAI,aAAa,EAAW,GAAI,EAAW,EAAI,EAAE,EAErD,KAAK,QAAQ,cAAe,CAAG,CACnC,CACJ,CACA,QAAQ,EAAO,CACX,GAAI,GAAO,EAAM,KAAK,EAAG,EAAqB,EAAM,sBAAsB,EAC1E,GAAI,EAAM,UAAU,EAAG,CACnB,GAAI,CAAC,EAAoB,CACrB,KAAK,KAAK,EACV,GAAI,GAAa,KAAK,UAAU,EAAE,cAAc,EAChD,KAAK,aAAa,EAAY,EAAG,EAAG,EAAY,EAAG,CAAC,CACxD,CACA,KAAK,cAAc,CAAK,EACpB,GAAQ,EAAM,YAAY,GAC1B,MAAK,YAAY,CAAI,EACrB,KAAK,QAAQ,iBAAkB,EAAM,WAAW,CAAC,GAErD,KAAK,QAAQ,YAAa,EAAM,YAAY,CAAC,EACxC,EAAM,0BAA0B,GACjC,KAAK,QAAQ,cAAe,eAAe,EAE/C,GAAI,GAAoB,EAAM,kCAAkC,EAC5D,EACA,KAAK,sBAAsB,CAAK,EAGhC,KAAK,QAAQ,cAAe,EAAM,OAAO,CAAC,EAE9C,EAAM,YAAY,IAAI,EACjB,GACD,KAAK,QAAQ,CAErB,CACJ,CACA,aAAa,EAAO,CAChB,GAAI,GAAI,EAAI,EACR,EAAS,GAAK,EAAM,cAAc,KAAO,MAAQ,IAAO,OAAS,EAAK,QAAS,EAAQ,GAAK,EAAM,cAAc,KAAO,MAAQ,IAAO,OAAS,EAAK,EAAG,EAAU,GAAK,EAAM,gBAAgB,KAAO,MAAQ,IAAO,OAAS,EAAK,CAChO,EAAG,EACH,EAAG,CACP,EAAG,EAAQ,EAAM,iBAAiB,EAAG,EAAQ,KAAK,OAAO,cAAc,EAAG,EAAS,EAAM,EAAI,EAAO,EAAS,EAAM,EAAI,EACvH,KAAK,QAAQ,cAAe,CAAK,EACjC,KAAK,QAAQ,aAAc,EAAO,KAAK,IAAI,KAAK,IAAI,CAAM,EAAG,KAAK,IAAI,CAAM,CAAC,CAAC,EAC9E,KAAK,QAAQ,gBAAiB,EAAO,EAAI,CAAM,EAC/C,KAAK,QAAQ,gBAAiB,EAAO,EAAI,CAAM,CACnD,CACJ,CACO,MAAM,SAAmB,EAAQ,CACpC,MAAM,EAAO,CACT,KAAK,KAAK,EACV,KAAK,QAAQ,YAAa,EAAM,QAAQ,EACxC,EAAM,aAAa,IAAI,EACvB,KAAK,QAAQ,CACjB,CACA,YAAY,EAAO,CACX,EAAM,aAAa,GACnB,KAAK,QAAQ,CAAK,CAE1B,CACA,QAAQ,EAAO,CACX,GAAI,EAAM,aAAa,EAAG,CACtB,GAAI,GAAqB,EAAM,sBAAsB,EACrD,GAAI,CAAC,EAAoB,CACrB,KAAK,KAAK,EACV,GAAI,GAAa,KAAK,UAAU,EAAE,cAAc,EAChD,KAAK,aAAa,EAAY,EAAG,EAAG,EAAY,EAAG,CAAC,CACxD,CACA,KAAK,cAAc,CAAK,EACxB,GAAI,GAAiB,EAAM,eAAe,EACtC,EAAc,IAAmB,OAAS,EAAM,YAAY,EAAI,EACpE,KAAK,QAAQ,YAAa,CAAW,EACrC,KAAK,QAAQ,cAAe,EAAM,QAAQ,EAC1C,EAAM,eAAe,IAAI,EACpB,GACD,KAAK,QAAQ,CAErB,CACJ,CACJ,C","file":"js/703c6018ca7.js","sourcesContent":["import { glob } from './Global.js';\nimport { Util } from './Util.js';\nvar now = (function () {\n    if (glob.performance && glob.performance.now) {\n        return function () {\n            return glob.performance.now();\n        };\n    }\n    return function () {\n        return new Date().getTime();\n    };\n})();\nexport class Animation {\n    constructor(func, layers) {\n        this.id = Animation.animIdCounter++;\n        this.frame = {\n            time: 0,\n            timeDiff: 0,\n            lastTime: now(),\n            frameRate: 0,\n        };\n        this.func = func;\n        this.setLayers(layers);\n    }\n    setLayers(layers) {\n        var lays = [];\n        if (!layers) {\n            lays = [];\n        }\n        else if (layers.length > 0) {\n            lays = layers;\n        }\n        else {\n            lays = [layers];\n        }\n        this.layers = lays;\n        return this;\n    }\n    getLayers() {\n        return this.layers;\n    }\n    addLayer(layer) {\n        var layers = this.layers, len = layers.length, n;\n        for (n = 0; n < len; n++) {\n            if (layers[n]._id === layer._id) {\n                return false;\n            }\n        }\n        this.layers.push(layer);\n        return true;\n    }\n    isRunning() {\n        var a = Animation, animations = a.animations, len = animations.length, n;\n        for (n = 0; n < len; n++) {\n            if (animations[n].id === this.id) {\n                return true;\n            }\n        }\n        return false;\n    }\n    start() {\n        this.stop();\n        this.frame.timeDiff = 0;\n        this.frame.lastTime = now();\n        Animation._addAnimation(this);\n        return this;\n    }\n    stop() {\n        Animation._removeAnimation(this);\n        return this;\n    }\n    _updateFrameObject(time) {\n        this.frame.timeDiff = time - this.frame.lastTime;\n        this.frame.lastTime = time;\n        this.frame.time += this.frame.timeDiff;\n        this.frame.frameRate = 1000 / this.frame.timeDiff;\n    }\n    static _addAnimation(anim) {\n        this.animations.push(anim);\n        this._handleAnimation();\n    }\n    static _removeAnimation(anim) {\n        var id = anim.id, animations = this.animations, len = animations.length, n;\n        for (n = 0; n < len; n++) {\n            if (animations[n].id === id) {\n                this.animations.splice(n, 1);\n                break;\n            }\n        }\n    }\n    static _runFrames() {\n        var layerHash = {}, animations = this.animations, anim, layers, func, n, i, layersLen, layer, key, needRedraw;\n        for (n = 0; n < animations.length; n++) {\n            anim = animations[n];\n            layers = anim.layers;\n            func = anim.func;\n            anim._updateFrameObject(now());\n            layersLen = layers.length;\n            if (func) {\n                needRedraw = func.call(anim, anim.frame) !== false;\n            }\n            else {\n                needRedraw = true;\n            }\n            if (!needRedraw) {\n                continue;\n            }\n            for (i = 0; i < layersLen; i++) {\n                layer = layers[i];\n                if (layer._id !== undefined) {\n                    layerHash[layer._id] = layer;\n                }\n            }\n        }\n        for (key in layerHash) {\n            if (!layerHash.hasOwnProperty(key)) {\n                continue;\n            }\n            layerHash[key].batchDraw();\n        }\n    }\n    static _animationLoop() {\n        var Anim = Animation;\n        if (Anim.animations.length) {\n            Anim._runFrames();\n            Util.requestAnimFrame(Anim._animationLoop);\n        }\n        else {\n            Anim.animRunning = false;\n        }\n    }\n    static _handleAnimation() {\n        if (!this.animRunning) {\n            this.animRunning = true;\n            Util.requestAnimFrame(this._animationLoop);\n        }\n    }\n}\nAnimation.animations = [];\nAnimation.animIdCounter = 0;\nAnimation.animRunning = false;\n","import { Util } from './Util.js';\nimport { SceneContext, HitContext } from './Context.js';\nimport { Konva } from './Global.js';\nimport { Factory } from './Factory.js';\nimport { getNumberValidator } from './Validators.js';\nvar _pixelRatio;\nfunction getDevicePixelRatio() {\n    if (_pixelRatio) {\n        return _pixelRatio;\n    }\n    var canvas = Util.createCanvasElement();\n    var context = canvas.getContext('2d');\n    _pixelRatio = (function () {\n        var devicePixelRatio = Konva._global.devicePixelRatio || 1, backingStoreRatio = context.webkitBackingStorePixelRatio ||\n            context.mozBackingStorePixelRatio ||\n            context.msBackingStorePixelRatio ||\n            context.oBackingStorePixelRatio ||\n            context.backingStorePixelRatio ||\n            1;\n        return devicePixelRatio / backingStoreRatio;\n    })();\n    return _pixelRatio;\n}\nexport class Canvas {\n    constructor(config) {\n        this.pixelRatio = 1;\n        this.width = 0;\n        this.height = 0;\n        this.isCache = false;\n        var conf = config || {};\n        var pixelRatio = conf.pixelRatio || Konva.pixelRatio || getDevicePixelRatio();\n        this.pixelRatio = pixelRatio;\n        this._canvas = Util.createCanvasElement();\n        this._canvas.style.padding = '0';\n        this._canvas.style.margin = '0';\n        this._canvas.style.border = '0';\n        this._canvas.style.background = 'transparent';\n        this._canvas.style.position = 'absolute';\n        this._canvas.style.top = '0';\n        this._canvas.style.left = '0';\n    }\n    getContext() {\n        return this.context;\n    }\n    getPixelRatio() {\n        return this.pixelRatio;\n    }\n    setPixelRatio(pixelRatio) {\n        var previousRatio = this.pixelRatio;\n        this.pixelRatio = pixelRatio;\n        this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n    }\n    setWidth(width) {\n        this.width = this._canvas.width = width * this.pixelRatio;\n        this._canvas.style.width = width + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    setHeight(height) {\n        this.height = this._canvas.height = height * this.pixelRatio;\n        this._canvas.style.height = height + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    getWidth() {\n        return this.width;\n    }\n    getHeight() {\n        return this.height;\n    }\n    setSize(width, height) {\n        this.setWidth(width || 0);\n        this.setHeight(height || 0);\n    }\n    toDataURL(mimeType, quality) {\n        try {\n            return this._canvas.toDataURL(mimeType, quality);\n        }\n        catch (e) {\n            try {\n                return this._canvas.toDataURL();\n            }\n            catch (err) {\n                Util.error('Unable to get data URL. ' +\n                    err.message +\n                    ' For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                return '';\n            }\n        }\n    }\n}\nFactory.addGetterSetter(Canvas, 'pixelRatio', undefined, getNumberValidator());\nexport class SceneCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0 }) {\n        super(config);\n        this.context = new SceneContext(this);\n        this.setSize(config.width, config.height);\n    }\n}\nexport class HitCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0 }) {\n        super(config);\n        this.hitCanvas = true;\n        this.context = new HitContext(this);\n        this.setSize(config.width, config.height);\n    }\n}\n","import { Factory } from './Factory.js';\nimport { Node } from './Node.js';\nimport { getNumberValidator } from './Validators.js';\nexport class Container extends Node {\n    constructor() {\n        super(...arguments);\n        this.children = [];\n    }\n    getChildren(filterFunc) {\n        if (!filterFunc) {\n            return this.children || [];\n        }\n        const children = this.children || [];\n        var results = [];\n        children.forEach(function (child) {\n            if (filterFunc(child)) {\n                results.push(child);\n            }\n        });\n        return results;\n    }\n    hasChildren() {\n        return this.getChildren().length > 0;\n    }\n    removeChildren() {\n        this.getChildren().forEach((child) => {\n            child.parent = null;\n            child.index = 0;\n            child.remove();\n        });\n        this.children = [];\n        this._requestDraw();\n        return this;\n    }\n    destroyChildren() {\n        this.getChildren().forEach((child) => {\n            child.parent = null;\n            child.index = 0;\n            child.destroy();\n        });\n        this.children = [];\n        this._requestDraw();\n        return this;\n    }\n    add(...children) {\n        if (arguments.length > 1) {\n            for (var i = 0; i < arguments.length; i++) {\n                this.add(arguments[i]);\n            }\n            return this;\n        }\n        var child = children[0];\n        if (child.getParent()) {\n            child.moveTo(this);\n            return this;\n        }\n        this._validateAdd(child);\n        child.index = this.getChildren().length;\n        child.parent = this;\n        child._clearCaches();\n        this.getChildren().push(child);\n        this._fire('add', {\n            child: child,\n        });\n        this._requestDraw();\n        return this;\n    }\n    destroy() {\n        if (this.hasChildren()) {\n            this.destroyChildren();\n        }\n        super.destroy();\n        return this;\n    }\n    find(selector) {\n        return this._generalFind(selector, false);\n    }\n    findOne(selector) {\n        var result = this._generalFind(selector, true);\n        return result.length > 0 ? result[0] : undefined;\n    }\n    _generalFind(selector, findOne) {\n        var retArr = [];\n        this._descendants((node) => {\n            const valid = node._isMatch(selector);\n            if (valid) {\n                retArr.push(node);\n            }\n            if (valid && findOne) {\n                return true;\n            }\n            return false;\n        });\n        return retArr;\n    }\n    _descendants(fn) {\n        let shouldStop = false;\n        const children = this.getChildren();\n        for (const child of children) {\n            shouldStop = fn(child);\n            if (shouldStop) {\n                return true;\n            }\n            if (!child.hasChildren()) {\n                continue;\n            }\n            shouldStop = child._descendants(fn);\n            if (shouldStop) {\n                return true;\n            }\n        }\n        return false;\n    }\n    toObject() {\n        var obj = Node.prototype.toObject.call(this);\n        obj.children = [];\n        this.getChildren().forEach((child) => {\n            obj.children.push(child.toObject());\n        });\n        return obj;\n    }\n    isAncestorOf(node) {\n        var parent = node.getParent();\n        while (parent) {\n            if (parent._id === this._id) {\n                return true;\n            }\n            parent = parent.getParent();\n        }\n        return false;\n    }\n    clone(obj) {\n        var node = Node.prototype.clone.call(this, obj);\n        this.getChildren().forEach(function (no) {\n            node.add(no.clone());\n        });\n        return node;\n    }\n    getAllIntersections(pos) {\n        var arr = [];\n        this.find('Shape').forEach(function (shape) {\n            if (shape.isVisible() && shape.intersects(pos)) {\n                arr.push(shape);\n            }\n        });\n        return arr;\n    }\n    _clearSelfAndDescendantCache(attr) {\n        var _a;\n        super._clearSelfAndDescendantCache(attr);\n        if (this.isCached()) {\n            return;\n        }\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (node) {\n            node._clearSelfAndDescendantCache(attr);\n        });\n    }\n    _setChildrenIndices() {\n        var _a;\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child, n) {\n            child.index = n;\n        });\n        this._requestDraw();\n    }\n    drawScene(can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas()), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedSceneCanvas = cachedCanvas && cachedCanvas.scene;\n        var caching = canvas && canvas.isCache;\n        if (!this.isVisible() && !caching) {\n            return this;\n        }\n        if (cachedSceneCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedSceneCanvas(context);\n            context.restore();\n        }\n        else {\n            this._drawChildren('drawScene', canvas, top);\n        }\n        return this;\n    }\n    drawHit(can, top) {\n        if (!this.shouldDrawHit(top)) {\n            return this;\n        }\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (cachedHitCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedHitCanvas(context);\n            context.restore();\n        }\n        else {\n            this._drawChildren('drawHit', canvas, top);\n        }\n        return this;\n    }\n    _drawChildren(drawMethod, canvas, top) {\n        var _a;\n        var context = canvas && canvas.getContext(), clipWidth = this.clipWidth(), clipHeight = this.clipHeight(), clipFunc = this.clipFunc(), hasClip = (clipWidth && clipHeight) || clipFunc;\n        const selfCache = top === this;\n        if (hasClip) {\n            context.save();\n            var transform = this.getAbsoluteTransform(top);\n            var m = transform.getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            context.beginPath();\n            if (clipFunc) {\n                clipFunc.call(this, context, this);\n            }\n            else {\n                var clipX = this.clipX();\n                var clipY = this.clipY();\n                context.rect(clipX, clipY, clipWidth, clipHeight);\n            }\n            context.clip();\n            m = transform.copy().invert().getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        }\n        var hasComposition = !selfCache &&\n            this.globalCompositeOperation() !== 'source-over' &&\n            drawMethod === 'drawScene';\n        if (hasComposition) {\n            context.save();\n            context._applyGlobalCompositeOperation(this);\n        }\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n            child[drawMethod](canvas, top);\n        });\n        if (hasComposition) {\n            context.restore();\n        }\n        if (hasClip) {\n            context.restore();\n        }\n    }\n    getClientRect(config) {\n        var _a;\n        config = config || {};\n        var skipTransform = config.skipTransform;\n        var relativeTo = config.relativeTo;\n        var minX, minY, maxX, maxY;\n        var selfRect = {\n            x: Infinity,\n            y: Infinity,\n            width: 0,\n            height: 0,\n        };\n        var that = this;\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n            if (!child.visible()) {\n                return;\n            }\n            var rect = child.getClientRect({\n                relativeTo: that,\n                skipShadow: config.skipShadow,\n                skipStroke: config.skipStroke,\n            });\n            if (rect.width === 0 && rect.height === 0) {\n                return;\n            }\n            if (minX === undefined) {\n                minX = rect.x;\n                minY = rect.y;\n                maxX = rect.x + rect.width;\n                maxY = rect.y + rect.height;\n            }\n            else {\n                minX = Math.min(minX, rect.x);\n                minY = Math.min(minY, rect.y);\n                maxX = Math.max(maxX, rect.x + rect.width);\n                maxY = Math.max(maxY, rect.y + rect.height);\n            }\n        });\n        var shapes = this.find('Shape');\n        var hasVisible = false;\n        for (var i = 0; i < shapes.length; i++) {\n            var shape = shapes[i];\n            if (shape._isVisible(this)) {\n                hasVisible = true;\n                break;\n            }\n        }\n        if (hasVisible && minX !== undefined) {\n            selfRect = {\n                x: minX,\n                y: minY,\n                width: maxX - minX,\n                height: maxY - minY,\n            };\n        }\n        else {\n            selfRect = {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n            };\n        }\n        if (!skipTransform) {\n            return this._transformedRect(selfRect, relativeTo);\n        }\n        return selfRect;\n    }\n}\nFactory.addComponentsGetterSetter(Container, 'clip', [\n    'x',\n    'y',\n    'width',\n    'height',\n]);\nFactory.addGetterSetter(Container, 'clipX', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipY', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipWidth', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipHeight', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipFunc');\n","import { Util } from './Util.js';\nimport { Konva } from './Global.js';\nfunction simplifyArray(arr) {\n    var retArr = [], len = arr.length, util = Util, n, val;\n    for (n = 0; n < len; n++) {\n        val = arr[n];\n        if (util._isNumber(val)) {\n            val = Math.round(val * 1000) / 1000;\n        }\n        else if (!util._isString(val)) {\n            val = val + '';\n        }\n        retArr.push(val);\n    }\n    return retArr;\n}\nvar COMMA = ',', OPEN_PAREN = '(', CLOSE_PAREN = ')', OPEN_PAREN_BRACKET = '([', CLOSE_BRACKET_PAREN = '])', SEMICOLON = ';', DOUBLE_PAREN = '()', EQUALS = '=', CONTEXT_METHODS = [\n    'arc',\n    'arcTo',\n    'beginPath',\n    'bezierCurveTo',\n    'clearRect',\n    'clip',\n    'closePath',\n    'createLinearGradient',\n    'createPattern',\n    'createRadialGradient',\n    'drawImage',\n    'ellipse',\n    'fill',\n    'fillText',\n    'getImageData',\n    'createImageData',\n    'lineTo',\n    'moveTo',\n    'putImageData',\n    'quadraticCurveTo',\n    'rect',\n    'restore',\n    'rotate',\n    'save',\n    'scale',\n    'setLineDash',\n    'setTransform',\n    'stroke',\n    'strokeText',\n    'transform',\n    'translate',\n];\nvar CONTEXT_PROPERTIES = [\n    'fillStyle',\n    'strokeStyle',\n    'shadowColor',\n    'shadowBlur',\n    'shadowOffsetX',\n    'shadowOffsetY',\n    'lineCap',\n    'lineDashOffset',\n    'lineJoin',\n    'lineWidth',\n    'miterLimit',\n    'font',\n    'textAlign',\n    'textBaseline',\n    'globalAlpha',\n    'globalCompositeOperation',\n    'imageSmoothingEnabled',\n];\nconst traceArrMax = 100;\nexport class Context {\n    constructor(canvas) {\n        this.canvas = canvas;\n        this._context = canvas._canvas.getContext('2d');\n        if (Konva.enableTrace) {\n            this.traceArr = [];\n            this._enableTrace();\n        }\n    }\n    fillShape(shape) {\n        if (shape.fillEnabled()) {\n            this._fill(shape);\n        }\n    }\n    _fill(shape) {\n    }\n    strokeShape(shape) {\n        if (shape.hasStroke()) {\n            this._stroke(shape);\n        }\n    }\n    _stroke(shape) {\n    }\n    fillStrokeShape(shape) {\n        if (shape.attrs.fillAfterStrokeEnabled) {\n            this.strokeShape(shape);\n            this.fillShape(shape);\n        }\n        else {\n            this.fillShape(shape);\n            this.strokeShape(shape);\n        }\n    }\n    getTrace(relaxed, rounded) {\n        var traceArr = this.traceArr, len = traceArr.length, str = '', n, trace, method, args;\n        for (n = 0; n < len; n++) {\n            trace = traceArr[n];\n            method = trace.method;\n            if (method) {\n                args = trace.args;\n                str += method;\n                if (relaxed) {\n                    str += DOUBLE_PAREN;\n                }\n                else {\n                    if (Util._isArray(args[0])) {\n                        str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n                    }\n                    else {\n                        if (rounded) {\n                            args = args.map((a) => typeof a === 'number' ? Math.floor(a) : a);\n                        }\n                        str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n                    }\n                }\n            }\n            else {\n                str += trace.property;\n                if (!relaxed) {\n                    str += EQUALS + trace.val;\n                }\n            }\n            str += SEMICOLON;\n        }\n        return str;\n    }\n    clearTrace() {\n        this.traceArr = [];\n    }\n    _trace(str) {\n        var traceArr = this.traceArr, len;\n        traceArr.push(str);\n        len = traceArr.length;\n        if (len >= traceArrMax) {\n            traceArr.shift();\n        }\n    }\n    reset() {\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n    }\n    getCanvas() {\n        return this.canvas;\n    }\n    clear(bounds) {\n        var canvas = this.getCanvas();\n        if (bounds) {\n            this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n        }\n        else {\n            this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n        }\n    }\n    _applyLineCap(shape) {\n        var lineCap = shape.getLineCap();\n        if (lineCap) {\n            this.setAttr('lineCap', lineCap);\n        }\n    }\n    _applyOpacity(shape) {\n        var absOpacity = shape.getAbsoluteOpacity();\n        if (absOpacity !== 1) {\n            this.setAttr('globalAlpha', absOpacity);\n        }\n    }\n    _applyLineJoin(shape) {\n        var lineJoin = shape.attrs.lineJoin;\n        if (lineJoin) {\n            this.setAttr('lineJoin', lineJoin);\n        }\n    }\n    setAttr(attr, val) {\n        this._context[attr] = val;\n    }\n    arc(a0, a1, a2, a3, a4, a5) {\n        this._context.arc(a0, a1, a2, a3, a4, a5);\n    }\n    arcTo(a0, a1, a2, a3, a4) {\n        this._context.arcTo(a0, a1, a2, a3, a4);\n    }\n    beginPath() {\n        this._context.beginPath();\n    }\n    bezierCurveTo(a0, a1, a2, a3, a4, a5) {\n        this._context.bezierCurveTo(a0, a1, a2, a3, a4, a5);\n    }\n    clearRect(a0, a1, a2, a3) {\n        this._context.clearRect(a0, a1, a2, a3);\n    }\n    clip() {\n        this._context.clip();\n    }\n    closePath() {\n        this._context.closePath();\n    }\n    createImageData(a0, a1) {\n        var a = arguments;\n        if (a.length === 2) {\n            return this._context.createImageData(a0, a1);\n        }\n        else if (a.length === 1) {\n            return this._context.createImageData(a0);\n        }\n    }\n    createLinearGradient(a0, a1, a2, a3) {\n        return this._context.createLinearGradient(a0, a1, a2, a3);\n    }\n    createPattern(a0, a1) {\n        return this._context.createPattern(a0, a1);\n    }\n    createRadialGradient(a0, a1, a2, a3, a4, a5) {\n        return this._context.createRadialGradient(a0, a1, a2, a3, a4, a5);\n    }\n    drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        var a = arguments, _context = this._context;\n        if (a.length === 3) {\n            _context.drawImage(a0, a1, a2);\n        }\n        else if (a.length === 5) {\n            _context.drawImage(a0, a1, a2, a3, a4);\n        }\n        else if (a.length === 9) {\n            _context.drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8);\n        }\n    }\n    ellipse(a0, a1, a2, a3, a4, a5, a6, a7) {\n        this._context.ellipse(a0, a1, a2, a3, a4, a5, a6, a7);\n    }\n    isPointInPath(x, y) {\n        return this._context.isPointInPath(x, y);\n    }\n    fill(path2d) {\n        if (path2d) {\n            this._context.fill(path2d);\n        }\n        else {\n            this._context.fill();\n        }\n    }\n    fillRect(x, y, width, height) {\n        this._context.fillRect(x, y, width, height);\n    }\n    strokeRect(x, y, width, height) {\n        this._context.strokeRect(x, y, width, height);\n    }\n    fillText(text, x, y, maxWidth) {\n        if (maxWidth) {\n            this._context.fillText(text, x, y, maxWidth);\n        }\n        else {\n            this._context.fillText(text, x, y);\n        }\n    }\n    measureText(text) {\n        return this._context.measureText(text);\n    }\n    getImageData(a0, a1, a2, a3) {\n        return this._context.getImageData(a0, a1, a2, a3);\n    }\n    lineTo(a0, a1) {\n        this._context.lineTo(a0, a1);\n    }\n    moveTo(a0, a1) {\n        this._context.moveTo(a0, a1);\n    }\n    rect(a0, a1, a2, a3) {\n        this._context.rect(a0, a1, a2, a3);\n    }\n    putImageData(a0, a1, a2) {\n        this._context.putImageData(a0, a1, a2);\n    }\n    quadraticCurveTo(a0, a1, a2, a3) {\n        this._context.quadraticCurveTo(a0, a1, a2, a3);\n    }\n    restore() {\n        this._context.restore();\n    }\n    rotate(a0) {\n        this._context.rotate(a0);\n    }\n    save() {\n        this._context.save();\n    }\n    scale(a0, a1) {\n        this._context.scale(a0, a1);\n    }\n    setLineDash(a0) {\n        if (this._context.setLineDash) {\n            this._context.setLineDash(a0);\n        }\n        else if ('mozDash' in this._context) {\n            this._context['mozDash'] = a0;\n        }\n        else if ('webkitLineDash' in this._context) {\n            this._context['webkitLineDash'] = a0;\n        }\n    }\n    getLineDash() {\n        return this._context.getLineDash();\n    }\n    setTransform(a0, a1, a2, a3, a4, a5) {\n        this._context.setTransform(a0, a1, a2, a3, a4, a5);\n    }\n    stroke(path2d) {\n        if (path2d) {\n            this._context.stroke(path2d);\n        }\n        else {\n            this._context.stroke();\n        }\n    }\n    strokeText(a0, a1, a2, a3) {\n        this._context.strokeText(a0, a1, a2, a3);\n    }\n    transform(a0, a1, a2, a3, a4, a5) {\n        this._context.transform(a0, a1, a2, a3, a4, a5);\n    }\n    translate(a0, a1) {\n        this._context.translate(a0, a1);\n    }\n    _enableTrace() {\n        var that = this, len = CONTEXT_METHODS.length, origSetter = this.setAttr, n, args;\n        var func = function (methodName) {\n            var origMethod = that[methodName], ret;\n            that[methodName] = function () {\n                args = simplifyArray(Array.prototype.slice.call(arguments, 0));\n                ret = origMethod.apply(that, arguments);\n                that._trace({\n                    method: methodName,\n                    args: args,\n                });\n                return ret;\n            };\n        };\n        for (n = 0; n < len; n++) {\n            func(CONTEXT_METHODS[n]);\n        }\n        that.setAttr = function () {\n            origSetter.apply(that, arguments);\n            var prop = arguments[0];\n            var val = arguments[1];\n            if (prop === 'shadowOffsetX' ||\n                prop === 'shadowOffsetY' ||\n                prop === 'shadowBlur') {\n                val = val / this.canvas.getPixelRatio();\n            }\n            that._trace({\n                property: prop,\n                val: val,\n            });\n        };\n    }\n    _applyGlobalCompositeOperation(node) {\n        const op = node.attrs.globalCompositeOperation;\n        var def = !op || op === 'source-over';\n        if (!def) {\n            this.setAttr('globalCompositeOperation', op);\n        }\n    }\n}\nCONTEXT_PROPERTIES.forEach(function (prop) {\n    Object.defineProperty(Context.prototype, prop, {\n        get() {\n            return this._context[prop];\n        },\n        set(val) {\n            this._context[prop] = val;\n        },\n    });\n});\nexport class SceneContext extends Context {\n    _fillColor(shape) {\n        var fill = shape.fill();\n        this.setAttr('fillStyle', fill);\n        shape._fillFunc(this);\n    }\n    _fillPattern(shape) {\n        this.setAttr('fillStyle', shape._getFillPattern());\n        shape._fillFunc(this);\n    }\n    _fillLinearGradient(shape) {\n        var grd = shape._getLinearGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    }\n    _fillRadialGradient(shape) {\n        var grd = shape._getRadialGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    }\n    _fill(shape) {\n        var hasColor = shape.fill(), fillPriority = shape.getFillPriority();\n        if (hasColor && fillPriority === 'color') {\n            this._fillColor(shape);\n            return;\n        }\n        var hasPattern = shape.getFillPatternImage();\n        if (hasPattern && fillPriority === 'pattern') {\n            this._fillPattern(shape);\n            return;\n        }\n        var hasLinearGradient = shape.getFillLinearGradientColorStops();\n        if (hasLinearGradient && fillPriority === 'linear-gradient') {\n            this._fillLinearGradient(shape);\n            return;\n        }\n        var hasRadialGradient = shape.getFillRadialGradientColorStops();\n        if (hasRadialGradient && fillPriority === 'radial-gradient') {\n            this._fillRadialGradient(shape);\n            return;\n        }\n        if (hasColor) {\n            this._fillColor(shape);\n        }\n        else if (hasPattern) {\n            this._fillPattern(shape);\n        }\n        else if (hasLinearGradient) {\n            this._fillLinearGradient(shape);\n        }\n        else if (hasRadialGradient) {\n            this._fillRadialGradient(shape);\n        }\n    }\n    _strokeLinearGradient(shape) {\n        var start = shape.getStrokeLinearGradientStartPoint(), end = shape.getStrokeLinearGradientEndPoint(), colorStops = shape.getStrokeLinearGradientColorStops(), grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n        if (colorStops) {\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            this.setAttr('strokeStyle', grd);\n        }\n    }\n    _stroke(shape) {\n        var dash = shape.dash(), strokeScaleEnabled = shape.getStrokeScaleEnabled();\n        if (shape.hasStroke()) {\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            if (dash && shape.dashEnabled()) {\n                this.setLineDash(dash);\n                this.setAttr('lineDashOffset', shape.dashOffset());\n            }\n            this.setAttr('lineWidth', shape.strokeWidth());\n            if (!shape.getShadowForStrokeEnabled()) {\n                this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n            }\n            var hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n            if (hasLinearGradient) {\n                this._strokeLinearGradient(shape);\n            }\n            else {\n                this.setAttr('strokeStyle', shape.stroke());\n            }\n            shape._strokeFunc(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    }\n    _applyShadow(shape) {\n        var _a, _b, _c;\n        var color = (_a = shape.getShadowRGBA()) !== null && _a !== void 0 ? _a : 'black', blur = (_b = shape.getShadowBlur()) !== null && _b !== void 0 ? _b : 5, offset = (_c = shape.getShadowOffset()) !== null && _c !== void 0 ? _c : {\n            x: 0,\n            y: 0,\n        }, scale = shape.getAbsoluteScale(), ratio = this.canvas.getPixelRatio(), scaleX = scale.x * ratio, scaleY = scale.y * ratio;\n        this.setAttr('shadowColor', color);\n        this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n        this.setAttr('shadowOffsetX', offset.x * scaleX);\n        this.setAttr('shadowOffsetY', offset.y * scaleY);\n    }\n}\nexport class HitContext extends Context {\n    _fill(shape) {\n        this.save();\n        this.setAttr('fillStyle', shape.colorKey);\n        shape._fillFuncHit(this);\n        this.restore();\n    }\n    strokeShape(shape) {\n        if (shape.hasHitStroke()) {\n            this._stroke(shape);\n        }\n    }\n    _stroke(shape) {\n        if (shape.hasHitStroke()) {\n            var strokeScaleEnabled = shape.getStrokeScaleEnabled();\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            var hitStrokeWidth = shape.hitStrokeWidth();\n            var strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n            this.setAttr('lineWidth', strokeWidth);\n            this.setAttr('strokeStyle', shape.colorKey);\n            shape._strokeFuncHit(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    }\n}\n"],"sourceRoot":""}