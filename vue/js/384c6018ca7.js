"use strict";(self.webpackChunkwebpack_web=self.webpackChunkwebpack_web||[]).push([[384],{1384:(H,U,m)=>{m.d(U,{N:()=>h});var l=m(2923),b=m(3994),w=m(2715),y=m(5222),u=m(4909),d=m(2407),A="absoluteOpacity",S="allEventListeners",p="absoluteTransform",R="absoluteScale",D="canvas",B="Change",X="children",F="konva",P="listening",k="mouseenter",I="mouseleave",W="name",N="set",M="Shape",E=" ",Y="stage",v="transform",K="Stage",L="visible",j=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(E);let V=1;class h{constructor(t){this._id=V++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===v||t===p)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,e){var s=this._cache.get(t),i=t===v||t===p,a=s===void 0||i&&s.dirty===!0;return a&&(s=e.call(this),this._cache.set(t,s)),s}_calculate(t,e,s){if(!this._attachedDepsListeners.get(t)){const i=e.map(a=>a+"Change.konva").join(E);this.on(i,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,s)}_getCanvasCache(){return this._cache.get(D)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===p&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete(D),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var e=t||{},s={};(e.x===void 0||e.y===void 0||e.width===void 0||e.height===void 0)&&(s=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var i=Math.ceil(e.width||s.width),a=Math.ceil(e.height||s.height),r=e.pixelRatio,n=e.x===void 0?Math.floor(s.x):e.x,o=e.y===void 0?Math.floor(s.y):e.y,c=e.offset||0,g=e.drawBorder||!1,x=e.hitCanvasPixelRatio||1;if(!i||!a){l.Z.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}i+=c*2+1,a+=c*2+1,n-=c,o-=c;var C=new w.RF({pixelRatio:r,width:i,height:a}),Z=new w.RF({pixelRatio:r,width:0,height:0}),T=new w.hh({pixelRatio:x,width:i,height:a}),_=C.getContext(),O=T.getContext();return T.isCache=!0,C.isCache=!0,this._cache.delete(D),this._filterUpToDate=!1,e.imageSmoothingEnabled===!1&&(C.getContext()._context.imageSmoothingEnabled=!1,Z.getContext()._context.imageSmoothingEnabled=!1),_.save(),O.save(),_.translate(-n,-o),O.translate(-n,-o),this._isUnderCache=!0,this._clearSelfAndDescendantCache(A),this._clearSelfAndDescendantCache(R),this.drawScene(C,this),this.drawHit(T,this),this._isUnderCache=!1,_.restore(),O.restore(),g&&(_.save(),_.beginPath(),_.rect(0,0,i,a),_.closePath(),_.setAttr("strokeStyle","red"),_.setAttr("lineWidth",5),_.stroke(),_.restore()),this._cache.set(D,{scene:C,filter:Z,hit:T,x:n,y:o}),this._requestDraw(),this}isCached(){return this._cache.has(D)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){var s=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],i,a,r,n,o=this.getAbsoluteTransform(e);return s.forEach(function(c){var g=o.point(c);i===void 0&&(i=r=g.x,a=n=g.y),i=Math.min(i,g.x),a=Math.min(a,g.y),r=Math.max(r,g.x),n=Math.max(n,g.y)}),{x:i,y:a,width:r-i,height:n-a}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);var s=this._getCachedSceneCanvas(),i=s.pixelRatio;t.drawImage(s._canvas,0,0,s.width/i,s.height/i),t.restore()}_drawCachedHitCanvas(t){var e=this._getCanvasCache(),s=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(s._canvas,0,0,s.width/s.pixelRatio,s.height/s.pixelRatio),t.restore()}_getCachedSceneCanvas(){var t=this.filters(),e=this._getCanvasCache(),s=e.scene,i=e.filter,a=i.getContext(),r,n,o,c;if(t){if(!this._filterUpToDate){var g=s.pixelRatio;i.setSize(s.width/s.pixelRatio,s.height/s.pixelRatio);try{for(r=t.length,a.clear(),a.drawImage(s._canvas,0,0,s.getWidth()/g,s.getHeight()/g),n=a.getImageData(0,0,i.getWidth(),i.getHeight()),o=0;o<r;o++){if(c=t[o],typeof c!="function"){l.Z.error("Filter should be type of function, but got "+typeof c+" instead. Please check correct filters");continue}c.call(this,n),a.putImageData(n,0,0)}}catch(x){l.Z.error("Unable to apply filter. "+x.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return s}on(t,e){if(this._cache&&this._cache.delete(S),arguments.length===3)return this._delegate.apply(this,arguments);var s=t.split(E),i=s.length,a,r,n,o,c;for(a=0;a<i;a++)r=s[a],n=r.split("."),o=n[0],c=n[1]||"",this.eventListeners[o]||(this.eventListeners[o]=[]),this.eventListeners[o].push({name:c,handler:e});return this}off(t,e){var s=(t||"").split(E),i=s.length,a,r,n,o,c,g;if(this._cache&&this._cache.delete(S),!t)for(r in this.eventListeners)this._off(r);for(a=0;a<i;a++)if(n=s[a],o=n.split("."),c=o[0],g=o[1],c)this.eventListeners[c]&&this._off(c,g,e);else for(r in this.eventListeners)this._off(r,g,e);return this}dispatchEvent(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,function(s){e.call(this,s.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,s){var i=this;this.on(t,function(a){for(var r=a.target.findAncestors(e,!0,i),n=0;n<r.length;n++)a=l.Z.cloneObject(a),a.currentTarget=r[n],s.call(r[n],a)})}remove(){return this.isDragging()&&this.stopDrag(),u.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(p),this._clearSelfAndDescendantCache(A),this._clearSelfAndDescendantCache(R),this._clearSelfAndDescendantCache(Y),this._clearSelfAndDescendantCache(L),this._clearSelfAndDescendantCache(P)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(t){var e="get"+l.Z._capitalize(t);return l.Z._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),e=[];t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{var e,s;if(!t)return this;for(e in t)e!==X&&(s=N+l.Z._capitalize(e),l.Z._isFunction(this[s])?this[s](t[e]):this._setAttr(e,t[e]))}),this}isListening(){return this._getCache(P,this._isListening)}_isListening(t){if(!this.listening())return!1;const s=this.getParent();return s&&s!==t&&this!==t?s._isListening(t):!0}isVisible(){return this._getCache(L,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const s=this.getParent();return s&&s!==t&&this!==t?s._isVisible(t):!0}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);var s=this.getLayer(),i=!1;u.DD._dragElements.forEach(r=>{r.dragStatus==="dragging"&&(r.node.nodeType==="Stage"||r.node.getLayer()===s)&&(i=!0)});var a=!e&&!y.So.hitOnDragEnabled&&i;return this.isListening()&&this.isVisible()&&!a}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t=this.getDepth(),e=this,s=0,i,a,r,n;function o(c){for(i=[],a=c.length,r=0;r<a;r++)n=c[r],s++,n.nodeType!==M&&(i=i.concat(n.getChildren().slice())),n._id===e._id&&(r=a);i.length>0&&i[0].getDepth()<=t&&o(i)}return e.nodeType!==K&&o(e.getStage().getChildren()),s}getDepth(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(v),this._clearSelfAndDescendantCache(p)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var t=this.getStage().getPointerPosition();if(!t)return null;var e=this.getAbsoluteTransform().copy();return e.invert(),e.point(t)}getAbsolutePosition(t){let e=!1,s=this.parent;for(;s;){if(s.isCached()){e=!0;break}s=s.parent}e&&!t&&(t=!0);var i=this.getAbsoluteTransform(t).getMatrix(),a=new l.w,r=this.offset();return a.m=i.slice(),a.translate(r.x,r.y),a.getTranslation()}setAbsolutePosition(t){var e=this._clearTransform();this.attrs.x=e.x,this.attrs.y=e.y,delete e.x,delete e.y,this._clearCache(v);var s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(t.x,t.y),t={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(e),this.setPosition({x:t.x,y:t.y}),this._clearCache(v),this._clearSelfAndDescendantCache(p),this}_setTransform(t){var e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var e=t.x,s=t.y,i=this.x(),a=this.y();return e!==void 0&&(i+=e),s!==void 0&&(a+=s),this.setPosition({x:i,y:a}),this}_eachAncestorReverse(t,e){var s=[],i=this.getParent(),a,r;if(!(e&&e._id===this._id)){for(s.unshift(this);i&&(!e||i._id!==e._id);)s.unshift(i),i=i.parent;for(a=s.length,r=0;r<a;r++)t(s[r])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return l.Z.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return l.Z.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return l.Z.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return l.Z.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return l.Z.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&l.Z.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(A,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var t={},e=this.getAttrs(),s,i,a,r,n;t.attrs={};for(s in e)i=e[s],n=l.Z.isObject(i)&&!l.Z._isPlainObject(i)&&!l.Z._isArray(i),!n&&(a=typeof this[s]=="function"&&this[s],delete e[s],r=a?a.call(this):null,e[s]=i,r!==i&&(t.attrs[s]=i));return t.className=this.getClassName(),l.Z._prepareToStringify(t)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,s){var i=[];e&&this._isMatch(t)&&i.push(this);for(var a=this.parent;a;){if(a===s)return i;a._isMatch(t)&&i.push(a),a=a.parent}return i}isAncestorOf(t){return!1}findAncestor(t,e,s){return this.findAncestors(t,e,s)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);var e=t.replace(/ /g,"").split(","),s=e.length,i,a;for(i=0;i<s;i++)if(a=e[i],l.Z.isValidSelector(a)||(l.Z.warn('Selector "'+a+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),l.Z.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),l.Z.warn("Konva is awesome, right?")),a.charAt(0)==="#"){if(this.id()===a.slice(1))return!0}else if(a.charAt(0)==="."){if(this.hasName(a.slice(1)))return!0}else if(this.className===a||this.nodeType===a)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(Y,this._getStage)}_getStage(){var t=this.getParent();if(t)return t.getStage()}fire(t,e={},s){return e.target=e.target||this,s?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(p,this._getAbsoluteTransform)}_getAbsoluteTransform(t){var e;if(t)return e=new l.w,this._eachAncestorReverse(function(i){var a=i.transformsEnabled();a==="all"?e.multiply(i.getTransform()):a==="position"&&e.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},t),e;e=this._cache.get(p)||new l.w,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();var s=this.transformsEnabled();if(s==="all")e.multiply(this.getTransform());else if(s==="position"){const i=this.attrs.x||0,a=this.attrs.y||0,r=this.attrs.offsetX||0,n=this.attrs.offsetY||0;e.translate(i-r,a-n)}return e.dirty=!1,e}getAbsoluteScale(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();const i=this.getAbsoluteTransform(t).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(v,this._getTransform)}_getTransform(){var t,e,s=this._cache.get(v)||new l.w;s.reset();var i=this.x(),a=this.y(),r=y.So.getAngle(this.rotation()),n=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,o=(e=this.attrs.scaleY)!==null&&e!==void 0?e:1,c=this.attrs.skewX||0,g=this.attrs.skewY||0,x=this.attrs.offsetX||0,C=this.attrs.offsetY||0;return(i!==0||a!==0)&&s.translate(i,a),r!==0&&s.rotate(r),(c!==0||g!==0)&&s.skew(c,g),(n!==1||o!==1)&&s.scale(n,o),(x!==0||C!==0)&&s.translate(-1*x,-1*C),s.dirty=!1,s}clone(t){var e=l.Z.cloneObject(this.attrs),s,i,a,r,n;for(s in t)e[s]=t[s];var o=new this.constructor(e);for(s in this.eventListeners)for(i=this.eventListeners[s],a=i.length,r=0;r<a;r++)n=i[r],n.name.indexOf(F)<0&&(o.eventListeners[s]||(o.eventListeners[s]=[]),o.eventListeners[s].push(n));return o}_toKonvaCanvas(t){t=t||{};var e=this.getClientRect(),s=this.getStage(),i=t.x!==void 0?t.x:Math.floor(e.x),a=t.y!==void 0?t.y:Math.floor(e.y),r=t.pixelRatio||1,n=new w.RF({width:t.width||Math.ceil(e.width)||(s?s.width():0),height:t.height||Math.ceil(e.height)||(s?s.height():0),pixelRatio:r}),o=n.getContext();return t.imageSmoothingEnabled===!1&&(o._context.imageSmoothingEnabled=!1),o.save(),(i||a)&&o.translate(-1*i,-1*a),this.drawScene(n),o.restore(),n}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};var e=t.mimeType||null,s=t.quality||null,i=this._toKonvaCanvas(t).toDataURL(e,s);return t.callback&&t.callback(i),i}toImage(t){if(!t||!t.callback)throw"callback required for toImage method config argument";var e=t.callback;delete t.callback,l.Z._urlToImage(this.toDataURL(t),function(s){e(s)})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():y.So.dragDistance}_off(t,e,s){var i=this.eventListeners[t],a,r,n;for(a=0;a<i.length;a++)if(r=i[a].name,n=i[a].handler,(r!=="konva"||e==="konva")&&(!e||r===e)&&(!s||s===n)){if(i.splice(a,1),i.length===0){delete this.eventListeners[t];break}a--}}_fireChangeEvent(t,e,s){this._fire(t+B,{oldVal:e,newVal:s})}addName(t){if(!this.hasName(t)){var e=this.name(),s=e?e+" "+t:t;this.name(s)}return this}hasName(t){if(!t)return!1;const e=this.name();if(!e)return!1;var s=(e||"").split(/\s/g);return s.indexOf(t)!==-1}removeName(t){var e=(this.name()||"").split(/\s/g),s=e.indexOf(t);return s!==-1&&(e.splice(s,1),this.name(e.join(" "))),this}setAttr(t,e){var s=this[N+l.Z._capitalize(t)];return l.Z._isFunction(s)?s.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(y.So.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,e){var s=this.attrs[t];s===e&&!l.Z.isObject(e)||(e==null?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,s,e),this._requestDraw())}_setComponentAttr(t,e,s){var i;s!==void 0&&(i=this.attrs[t],i||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=s,this._fireChangeEvent(t,i,s))}_fireAndBubble(t,e,s){e&&this.nodeType===M&&(e.target=this);var i=(t===k||t===I)&&(s&&(this===s||this.isAncestorOf&&this.isAncestorOf(s))||this.nodeType==="Stage"&&!s);if(!i){this._fire(t,e);var a=(t===k||t===I)&&s&&s.isAncestorOf&&s.isAncestorOf(this)&&!s.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!a&&(s&&s.parent?this._fireAndBubble.call(this.parent,t,e,s):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){let e=this._cache.get(S);if(!e){e={};let i=Object.getPrototypeOf(this);for(;i;){if(!i.eventListeners){i=Object.getPrototypeOf(i);continue}for(var s in i.eventListeners){const a=i.eventListeners[s],r=e[s]||[];e[s]=a.concat(r)}i=Object.getPrototypeOf(i)}this._cache.set(S,e)}return e[t]}_fire(t,e){e=e||{},e.currentTarget=this,e.type=t;const s=this._getProtoListeners(t);if(s)for(var i=0;i<s.length;i++)s[i].handler.call(this,e);const a=this.eventListeners[t];if(a)for(var i=0;i<a.length;i++)a[i].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var e=t?t.pointerId:void 0,s=this.getStage(),i=this.getAbsolutePosition(),a=s._getPointerById(e)||s._changedPointerPositions[0]||i;u.DD._dragElements.set(this._id,{node:this,startPointerPos:a,offset:{x:a.x-i.x,y:a.y-i.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){u.DD._dragElements.has(this._id)||this._createDragElement(t);const s=u.DD._dragElements.get(this._id);s.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){const s=this.getStage()._getPointerById(e.pointerId);if(!!s){var i={x:s.x-e.offset.x,y:s.y-e.offset.y},a=this.dragBoundFunc();if(a!==void 0){const r=a.call(this,i,t);r?i=r:l.Z.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}}stopDrag(t){const e=u.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),u.DD._endDragBefore(t),u.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=u.DD._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){var e=t.evt.button!==void 0,s=!e||y.So.dragButtons.indexOf(t.evt.button)>=0;if(!!s&&!this.isDragging()){var i=!1;u.DD._dragElements.forEach(a=>{this.isAncestorOf(a.node)&&(i=!0)}),i||this._createDragElement(t)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage();if(!t)return;const e=u.DD._dragElements.get(this._id),s=e&&e.dragStatus==="dragging",i=e&&e.dragStatus==="ready";s?this.stopDrag():i&&u.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const e=this.getStage();if(!e)return!1;const s={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return l.Z.haveIntersection(s,this.getClientRect())}static create(t,e){return l.Z._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){var s=h.prototype.getClassName.call(t),i=t.children,a,r,n;e&&(t.attrs.container=e),y.So[s]||(l.Z.warn('Can not find a node with class name "'+s+'". Fallback to "Shape".'),s="Shape");const o=y.So[s];if(a=new o(t.attrs),i)for(r=i.length,n=0;n<r;n++)a.add(h._createNode(i[n]));return a}}h.prototype.nodeType="Node",h.prototype._attrsAffectingSize=[],h.prototype.eventListeners={},h.prototype.on.call(h.prototype,j,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(v),this._clearSelfAndDescendantCache(p)}),h.prototype.on.call(h.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(L)}),h.prototype.on.call(h.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(P)}),h.prototype.on.call(h.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(A)});const f=b.F.addGetterSetter;f(h,"zIndex"),f(h,"absolutePosition"),f(h,"position"),f(h,"x",0,(0,d.Kg)()),f(h,"y",0,(0,d.Kg)()),f(h,"globalCompositeOperation","source-over",(0,d.sY)()),f(h,"opacity",1,(0,d.Kg)()),f(h,"name","",(0,d.sY)()),f(h,"id","",(0,d.sY)()),f(h,"rotation",0,(0,d.Kg)()),b.F.addComponentsGetterSetter(h,"scale",["x","y"]),f(h,"scaleX",1,(0,d.Kg)()),f(h,"scaleY",1,(0,d.Kg)()),b.F.addComponentsGetterSetter(h,"skew",["x","y"]),f(h,"skewX",0,(0,d.Kg)()),f(h,"skewY",0,(0,d.Kg)()),b.F.addComponentsGetterSetter(h,"offset",["x","y"]),f(h,"offsetX",0,(0,d.Kg)()),f(h,"offsetY",0,(0,d.Kg)()),f(h,"dragDistance",null,(0,d.Kg)()),f(h,"width",0,(0,d.Kg)()),f(h,"height",0,(0,d.Kg)()),f(h,"listening",!0,(0,d.I0)()),f(h,"preventDefault",!0,(0,d.I0)()),f(h,"filters",null,function(G){return this._filterUpToDate=!1,G}),f(h,"visible",!0,(0,d.I0)()),f(h,"transformsEnabled","all",(0,d.sY)()),f(h,"size"),f(h,"dragBoundFunc"),f(h,"draggable",!1,(0,d.I0)()),b.F.backCompat(h,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})}}]);

//# sourceMappingURL=384c6018ca7.js.map